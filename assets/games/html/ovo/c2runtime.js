var cr={plugins_:{},behaviors:{}};"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype}),function(){function t(t,e){this.x=t,this.y=e,cr.seal(this)}function e(t,e,i,s){this.set(t,e,i,s),cr.seal(this)}function i(){this.tlx=0,this.tly=0,this.trx=0,this.try_=0,this.brx=0,this.bry=0,this.blx=0,this.bly=0,cr.seal(this)}cr.logexport=function(t){window.console&&window.console.log&&window.console.log(t)},cr.logerror=function(t){window.console&&window.console.error&&window.console.error(t)},cr.seal=function(t){return t},cr.freeze=function(t){return t},cr.is_undefined=function(t){return void 0===t},cr.is_number=function(t){return"number"==typeof t},cr.is_string=function(t){return"string"==typeof t},cr.isPOT=function(t){return 0<t&&0==(t-1&t)},cr.nextHighestPowerOfTwo=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},cr.abs=function(t){return t<0?-t:t},cr.max=function(t,e){return e<t?t:e},cr.min=function(t,e){return t<e?t:e},cr.PI=Math.PI,cr.round=function(t){return t+.5|0},cr.floor=function(t){return 0<=t?0|t:(0|t)-1},cr.ceil=function(t){var e=0|t;return e===t?e:1+e},t.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.mul=function(t,e){return this.x*=t,this.y*=e,this},cr.vector2=t,cr.segments_intersect=function(t,e,i,s,n,r,o,a){var h,c,l=t<i?(p=t,i):(p=i,t),u=n<o?(h=n,o):(h=o,n);if(l<h||u<p)return!1;if(p=r<a?(c=r,a):(c=a,r),(e<s?(d=e,s):(d=s,e))<c||p<d)return!1;var p=n-t+o-i,d=r-e+a-s,t=i-t,e=s-e,n=o-n,a=a-r,r=cr.abs(e*n-a*t),a=n*d-a*p;if(cr.abs(a)>r)return!1;p=t*d-e*p;return cr.abs(p)<=r},e.prototype.set=function(t,e,i,s){this.left=t,this.top=e,this.right=i,this.bottom=s},e.prototype.copy=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},e.prototype.width=function(){return this.right-this.left},e.prototype.height=function(){return this.bottom-this.top},e.prototype.offset=function(t,e){return this.left+=t,this.top+=e,this.right+=t,this.bottom+=e,this},e.prototype.normalize=function(){var t=0;this.left>this.right&&(t=this.left,this.left=this.right,this.right=t),this.top>this.bottom&&(t=this.top,this.top=this.bottom,this.bottom=t)},e.prototype.intersects_rect=function(t){return!(t.right<this.left||t.bottom<this.top||t.left>this.right||t.top>this.bottom)},e.prototype.intersects_rect_off=function(t,e,i){return!(t.right+e<this.left||t.bottom+i<this.top||t.left+e>this.right||t.top+i>this.bottom)},e.prototype.contains_pt=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},e.prototype.equals=function(t){return this.left===t.left&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom},cr.rect=e,i.prototype.set_from_rect=function(t){this.tlx=t.left,this.tly=t.top,this.trx=t.right,this.try_=t.top,this.brx=t.right,this.bry=t.bottom,this.blx=t.left,this.bly=t.bottom},i.prototype.set_from_rotated_rect=function(t,e){var i,s,n,r,o,a,h;0===e?this.set_from_rect(t):(a=Math.sin(e),h=Math.cos(e),i=t.left*a,s=t.top*a,n=t.right*a,r=t.bottom*a,o=t.left*h,e=t.top*h,a=t.right*h,h=t.bottom*h,this.tlx=o-s,this.tly=e+i,this.trx=a-s,this.try_=e+n,this.brx=a-r,this.bry=h+n,this.blx=o-r,this.bly=h+i)},i.prototype.offset=function(t,e){return this.tlx+=t,this.tly+=e,this.trx+=t,this.try_+=e,this.brx+=t,this.bry+=e,this.blx+=t,this.bly+=e,this};var n=0,r=0;function s(t,e,i,s){r=t<e?i<s?(n=t<i?t:i,s<e?e:s):(n=t<s?t:s,i<e?e:i):i<s?(n=e<i?e:i,s<t?t:s):(n=e<s?e:s,i<t?t:i)}i.prototype.bounding_box=function(t){s(this.tlx,this.trx,this.brx,this.blx),t.left=n,t.right=r,s(this.tly,this.try_,this.bry,this.bly),t.top=n,t.bottom=r},i.prototype.contains_pt=function(t,e){var i=this.tlx,s=this.tly,n=this.trx-i,r=this.try_-s,o=this.brx-i,a=this.bry-s,h=t-i,c=e-s,l=n*n+r*r,u=n*o+r*a,p=n*h+r*c,d=o*o+a*a,g=o*h+a*c,f=1/(l*d-u*u),t=(d*p-u*g)*f,e=(l*g-u*p)*f;if(0<=t&&0<e&&t+e<1)return!0;e=((l=(n=this.blx-i)*n+(r=this.bly-s)*r)*g-(u=n*o+r*a)*(p=n*h+r*c))*(f=1/(l*d-u*u));return 0<=(t=(d*p-u*g)*f)&&0<e&&t+e<1},i.prototype.at=function(t,e){if(e)switch(t){case 0:return this.tlx;case 1:return this.trx;case 2:return this.brx;case 3:return this.blx;case 4:default:return this.tlx}else switch(t){case 0:return this.tly;case 1:return this.try_;case 2:return this.bry;case 3:return this.bly;case 4:default:return this.tly}},i.prototype.midX=function(){return(this.tlx+this.trx+this.brx+this.blx)/4},i.prototype.midY=function(){return(this.tly+this.try_+this.bry+this.bly)/4},i.prototype.intersects_segment=function(t,e,i,s){if(this.contains_pt(t,e)||this.contains_pt(i,s))return!0;for(var n,r,o,a,h=0;h<4;h++)if(n=this.at(h,!0),r=this.at(h,!1),o=this.at(h+1,!0),a=this.at(h+1,!1),cr.segments_intersect(t,e,i,s,n,r,o,a))return!0;return!1},i.prototype.intersects_quad=function(t){var e,i,s,n,r,o,a,h,c,l,u=t.midX(),p=t.midY();if(this.contains_pt(u,p))return!0;if(u=this.midX(),p=this.midY(),t.contains_pt(u,p))return!0;for(c=0;c<4;c++)for(l=0;l<4;l++)if(e=this.at(c,!0),i=this.at(c,!1),s=this.at(c+1,!0),n=this.at(c+1,!1),r=t.at(l,!0),o=t.at(l,!1),a=t.at(l+1,!0),h=t.at(l+1,!1),cr.segments_intersect(e,i,s,n,r,o,a,h))return!0;return!1},cr.quad=i,cr.RGB=function(t,e,i){return Math.max(Math.min(t,255),0)|Math.max(Math.min(e,255),0)<<8|Math.max(Math.min(i,255),0)<<16},cr.GetRValue=function(t){return 255&t},cr.GetGValue=function(t){return(65280&t)>>8},cr.GetBValue=function(t){return(16711680&t)>>16},cr.shallowCopy=function(t,e,i){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t},cr.arrayRemove=function(t,e){var i,s;if(!((e=cr.floor(e))<0||e>=t.length)){for(i=e,s=t.length-1;i<s;i++)t[i]=t[i+1];cr.truncateArray(t,s)}},cr.truncateArray=function(t,e){t.length=e},cr.clearArray=function(t){cr.truncateArray(t,0)},cr.shallowAssignArray=function(t,e){var i,s;for(cr.clearArray(t),i=0,s=e.length;i<s;++i)t[i]=e[i]},cr.appendArray=function(t,e){t.push.apply(t,e)},cr.fastIndexOf=function(t,e){for(var i=0,s=t.length;i<s;++i)if(t[i]===e)return i;return-1},cr.arrayFindRemove=function(t,e){e=cr.fastIndexOf(t,e);-1!==e&&cr.arrayRemove(t,e)},cr.clamp=function(t,e,i){return t<e?e:i<t?i:t},cr.to_radians=function(t){return t/(180/cr.PI)},cr.to_degrees=function(t){return t*(180/cr.PI)},cr.clamp_angle_degrees=function(t){return(t%=360)<0&&(t+=360),t},cr.clamp_angle=function(t){return(t%=2*cr.PI)<0&&(t+=2*cr.PI),t},cr.to_clamped_degrees=function(t){return cr.clamp_angle_degrees(cr.to_degrees(t))},cr.to_clamped_radians=function(t){return cr.clamp_angle(cr.to_radians(t))},cr.angleTo=function(t,e,i,s){t=i-t,e=s-e;return Math.atan2(e,t)},cr.angleDiff=function(t,e){if(t===e)return 0;var i=Math.sin(t),t=Math.cos(t),e=i*Math.sin(e)+t*Math.cos(e);return 1<=e?0:e<=-1?cr.PI:Math.acos(e)},cr.angleRotate=function(t,e,i){var s=Math.sin(t),n=Math.cos(t),r=Math.sin(e),o=Math.cos(e);return Math.acos(s*r+n*o)>i?0<n*r-s*o?cr.clamp_angle(t+i):cr.clamp_angle(t-i):cr.clamp_angle(e)},cr.angleClockwise=function(t,e){var i=Math.sin(t);return Math.cos(t)*Math.sin(e)-i*Math.cos(e)<=0},cr.rotatePtAround=function(t,e,i,s,n,r){if(0===i)return r?t:e;var o=Math.sin(i),a=Math.cos(i),i=(t-=s)*o;return t=t*a-(e-=n)*o,e=e*a+i,t+=s,e+=n,r?t:e},cr.distanceTo=function(t,e,i,s){t=i-t,e=s-e;return Math.sqrt(t*t+e*e)},cr.xor=function(t,e){return!t!=!e},cr.lerp=function(t,e,i){return t+(e-t)*i},cr.unlerp=function(t,e,i){return t===e?0:(i-t)/(e-t)},cr.anglelerp=function(t,e,i){var s=cr.angleDiff(t,e);return cr.angleClockwise(e,t)?t+s*i:t-s*i},cr.qarp=function(t,e,i,s){return cr.lerp(cr.lerp(t,e,s),cr.lerp(e,i,s),s)},cr.cubic=function(t,e,i,s,n){return cr.lerp(cr.qarp(t,e,i,n),cr.qarp(e,i,s,n),n)},cr.cosp=function(t,e,i){return(t+e+(t-e)*Math.cos(i*Math.PI))/2},cr.hasAnyOwnProperty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!0;return!1},cr.wipe=function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e]};var o=+new Date,a=!(cr.performance_now=function(){if(void 0!==window.performance){var t=window.performance;if(void 0!==t.now)return t.now();if(void 0!==t.webkitNow)return t.webkitNow();if(void 0!==t.mozNow)return t.mozNow();if(void 0!==t.msNow)return t.msNow()}return Date.now()-o}),h=!1,c=!1;void 0!==window&&(a=!(/chrome/i.test(navigator.userAgent)||/chromium/i.test(navigator.userAgent))&&/safari/i.test(navigator.userAgent),h=/(iphone|ipod|ipad)/i.test(navigator.userAgent),c=window.c2ejecta);var l=!a&&!c&&!h&&"undefined"!=typeof Set&&void 0!==Set.prototype.forEach;function u(){this.s=null,this.items=null,this.item_count=0,l&&(this.s=new Set),this.values_cache=[],this.cache_valid=!0,cr.seal(this)}u.prototype.contains=function(t){return!this.isEmpty()&&(l?this.s.has(t):this.items&&this.items.hasOwnProperty(t))},u.prototype.add=function(t){var e,i;l?this.s.has(t)||(this.s.add(t),this.cache_valid=!1):(e=t.toString(),(i=this.items)?i.hasOwnProperty(e)||(i[e]=t,this.item_count++,this.cache_valid=!1):(this.items={},this.items[e]=t,this.item_count=1,this.cache_valid=!1))},u.prototype.remove=function(t){var e;this.isEmpty()||(l?this.s.has(t)&&(this.s.delete(t),this.cache_valid=!1):this.items&&(e=t.toString(),(t=this.items).hasOwnProperty(e)&&(delete t[e],this.item_count--,this.cache_valid=!1)))},u.prototype.clear=function(){this.isEmpty()||(l?this.s.clear():(this.items=null,this.item_count=0),cr.clearArray(this.values_cache),this.cache_valid=!0)},u.prototype.isEmpty=function(){return 0===this.count()},u.prototype.count=function(){return l?this.s.size:this.item_count};var p=null,d=0;function g(t){p[d++]=t}u.prototype.update_cache=function(){if(!this.cache_valid){if(l)cr.clearArray(this.values_cache),p=this.values_cache,d=0,this.s.forEach(g),p=null,d=0;else{var t=this.values_cache;cr.clearArray(t);var e,i=0,s=this.items;if(s)for(e in s)s.hasOwnProperty(e)&&(t[i++]=s[e])}this.cache_valid=!0}},u.prototype.valuesRef=function(){return this.update_cache(),this.values_cache},cr.ObjectSet=u;var f=new cr.ObjectSet;function m(){this.c=0,this.y=0,this.t=0,this.sum=0,cr.seal(this)}function y(t){this.pts_cache=[],this.bboxLeft=0,this.bboxTop=0,this.bboxRight=0,this.bboxBottom=0,this.convexpolys=null,this.set_pts(t),cr.seal(this)}function _(t,e){this.cellwidth=t,this.cellheight=e,this.cells={}}function v(t,e){this.cellwidth=t,this.cellheight=e,this.cells={}}cr.removeArrayDuplicates=function(t){for(var e=0,i=t.length;e<i;++e)f.add(t[e]);cr.shallowAssignArray(t,f.valuesRef()),f.clear()},cr.arrayRemoveAllFromObjectSet=function(t,e){l?cr.arrayRemoveAll_set(t,e.s):cr.arrayRemoveAll_arr(t,e.valuesRef())},cr.arrayRemoveAll_set=function(t,e){for(var i,s=0,n=0,r=t.length;s<r;++s)i=t[s],e.has(i)||(t[n++]=i);cr.truncateArray(t,n)},cr.arrayRemoveAll_arr=function(t,e){for(var i,s=0,n=0,r=t.length;s<r;++s)i=t[s],-1===cr.fastIndexOf(e,i)&&(t[n++]=i);cr.truncateArray(t,n)},m.prototype.add=function(t){this.y=t-this.c,this.t=this.sum+this.y,this.c=this.t-this.sum-this.y,this.sum=this.t},m.prototype.reset=function(){this.c=0,this.y=0,this.t=0,this.sum=0},cr.KahanAdder=m,cr.regexp_escape=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},y.prototype.set_pts=function(t){this.pts_array=t,this.pts_count=t.length/2,this.pts_cache.length=t.length,this.cache_width=-1,this.cache_height=-1,this.cache_angle=0},y.prototype.is_empty=function(){return!this.pts_array.length},y.prototype.update_bbox=function(){for(var t,e,i=this.pts_cache,s=i[0],n=s,r=i[1],o=r,a=1,h=this.pts_count;a<h;++a)(t=i[e=2*a])<s&&(s=t),n<t&&(n=t),(e=i[1+e])<r&&(r=e),o<e&&(o=e);this.bboxLeft=s,this.bboxRight=n,this.bboxTop=r,this.bboxBottom=o},y.prototype.set_from_rect=function(t,e,i){this.pts_cache.length=8,this.pts_count=4;var s=this.pts_cache;s[0]=t.left-e,s[1]=t.top-i,s[2]=t.right-e,s[3]=t.top-i,s[4]=t.right-e,s[5]=t.bottom-i,s[6]=t.left-e,s[7]=t.bottom-i,this.cache_width=t.right-t.left,this.cache_height=t.bottom-t.top,this.update_bbox()},y.prototype.set_from_quad=function(t,e,i,s,n){this.pts_cache.length=8,this.pts_count=4;var r=this.pts_cache;r[0]=t.tlx-e,r[1]=t.tly-i,r[2]=t.trx-e,r[3]=t.try_-i,r[4]=t.brx-e,r[5]=t.bry-i,r[6]=t.blx-e,r[7]=t.bly-i,this.cache_width=s,this.cache_height=n,this.update_bbox()},y.prototype.set_from_poly=function(t){this.pts_count=t.pts_count,cr.shallowAssignArray(this.pts_cache,t.pts_cache),this.bboxLeft=t.bboxLeft,this.bboxTop=t.bboxTop,this.bboxRight=t.bboxRight,this.bboxBottom=t.bboxBottom},y.prototype.cache_poly=function(t,e,i){if(this.cache_width!==t||this.cache_height!==e||this.cache_angle!==i){var s,n,r,o,a,h;this.cache_width=t,this.cache_height=e,this.cache_angle=i;var c=0,l=1,u=this.pts_array,p=this.pts_cache;for(0!==i&&(c=Math.sin(i),l=Math.cos(i)),s=0,o=this.pts_count;s<o;s++)r=1+(n=2*s),a=u[n]*t,h=u[r]*e,p[n]=a*l-h*c,p[r]=h*l+a*c;this.update_bbox()}},y.prototype.contains_pt=function(t,e){var i=this.pts_cache;if(t===i[0]&&e===i[1])return!0;for(var s,n,r,o,a=this.pts_count,h=this.bboxLeft-110,c=this.bboxTop-101,l=this.bboxRight+131,u=this.bboxBottom+120,p=0,d=0,g=0;g<a;g++)o=(g+1)%a*2,s=i[r=2*g],n=i[1+r],r=i[o],o=i[1+o],cr.segments_intersect(h,c,t,e,s,n,r,o)&&p++,cr.segments_intersect(l,u,t,e,s,n,r,o)&&d++;return p%2==1||d%2==1},y.prototype.intersects_poly=function(t,e,i){var s,n,r,o,a,h,c,l,u,p,d,g,f,m,y=t.pts_cache,_=this.pts_cache;if(this.contains_pt(y[0]+e,y[1]+i))return!0;if(t.contains_pt(_[0]-e,_[1]-i))return!0;for(s=0,o=this.pts_count;s<o;s++)for(r=(s+1)%o*2,c=_[n=2*s],l=_[1+n],u=_[r],p=_[1+r],a=0,h=t.pts_count;a<h;a++)if(m=(a+1)%h*2,d=y[f=2*a]+e,g=y[1+f]+i,f=y[m]+e,m=y[1+m]+i,cr.segments_intersect(c,l,u,p,d,g,f,m))return!0;return!1},y.prototype.intersects_segment=function(t,e,i,s,n,r){var o,a,h,c,l,u,p=this.pts_cache;if(this.contains_pt(i-t,s-e))return!0;for(o=0,a=this.pts_count;o<a;o++)if(u=(o+1)%a*2,h=p[l=2*o]+t,c=p[1+l]+e,l=p[u]+t,u=p[1+u]+e,cr.segments_intersect(i,s,n,r,h,c,l,u))return!0;return!1},y.prototype.mirror=function(t){for(var e,i=0,s=this.pts_count;i<s;++i)e=2*i,this.pts_cache[e]=2*t-this.pts_cache[e]},y.prototype.flip=function(t){for(var e,i=0,s=this.pts_count;i<s;++i)e=2*i+1,this.pts_cache[e]=2*t-this.pts_cache[e]},y.prototype.diag=function(){for(var t,e,i,s=0,n=this.pts_count;s<n;++s)e=1+(t=2*s),i=this.pts_cache[t],this.pts_cache[t]=this.pts_cache[e],this.pts_cache[e]=i},cr.CollisionPoly=y,_.prototype.totalCellCount=0,_.prototype.getCell=function(t,e,i){var s,n=this.cells[t];return n?(s=n[e])||(i?(s=w(this,t,e),this.cells[t][e]=s):null):i?(s=w(this,t,e),this.cells[t]={},this.cells[t][e]=s):null},_.prototype.XToCell=function(t){return cr.floor(t/this.cellwidth)},_.prototype.YToCell=function(t){return cr.floor(t/this.cellheight)},_.prototype.update=function(t,e,i){var s,n,r,o,a;if(e)for(s=e.left,n=e.right;s<=n;++s)for(r=e.top,o=e.bottom;r<=o;++r)i&&i.contains_pt(s,r)||(a=this.getCell(s,r,!1))&&(a.remove(t),a.isEmpty()&&(a=a,_.prototype.totalCellCount--,a.objects.clear(),b.length<1e3&&b.push(a),this.cells[s][r]=null));if(i)for(s=i.left,n=i.right;s<=n;++s)for(r=i.top,o=i.bottom;r<=o;++r)e&&e.contains_pt(s,r)||this.getCell(s,r,!0).insert(t)},_.prototype.queryRange=function(t,e){for(var i,s,n=this.XToCell(t.left),r=this.YToCell(t.top),o=this.XToCell(t.right),a=this.YToCell(t.bottom);n<=o;++n)for(i=r;i<=a;++i)(s=this.getCell(n,i,!1))&&s.dump(e)},cr.SparseGrid=_,v.prototype.totalCellCount=0,v.prototype.getCell=function(t,e,i){var s,n=this.cells[t];return n?(s=n[e])||(i?(s=T(this,t,e),this.cells[t][e]=s):null):i?(s=T(this,t,e),this.cells[t]={},this.cells[t][e]=s):null},v.prototype.XToCell=function(t){return cr.floor(t/this.cellwidth)},v.prototype.YToCell=function(t){return cr.floor(t/this.cellheight)},v.prototype.update=function(t,e,i){var s,n,r,o,a;if(e)for(s=e.left,n=e.right;s<=n;++s)for(r=e.top,o=e.bottom;r<=o;++r)i&&i.contains_pt(s,r)||(a=this.getCell(s,r,!1))&&(a.remove(t),a.isEmpty()&&(a=a,v.prototype.totalCellCount--,a.reset(),S.length<1e3&&S.push(a),this.cells[s][r]=null));if(i)for(s=i.left,n=i.right;s<=n;++s)for(r=i.top,o=i.bottom;r<=o;++r)e&&e.contains_pt(s,r)||this.getCell(s,r,!0).insert(t)},v.prototype.queryRange=function(t,e,i,s,n){for(var r,o,a=this.XToCell(t),h=this.YToCell(e),c=this.XToCell(i),l=this.YToCell(s);a<=c;++a)for(r=h;r<=l;++r)(o=this.getCell(a,r,!1))&&o.dump(n)},v.prototype.markRangeChanged=function(t){for(var e,i,s=t.left,n=t.top,r=t.right,o=t.bottom;s<=r;++s)for(e=n;e<=o;++e)(i=this.getCell(s,e,!1))&&(i.is_sorted=!1)},cr.RenderGrid=v;var b=[];function w(t,e,i){var s;return _.prototype.totalCellCount++,b.length?((s=b.pop()).grid=t,s.x=e,s.y=i,s):new cr.GridCell(t,e,i)}function x(t,e,i){this.grid=t,this.x=e,this.y=i,this.objects=new cr.ObjectSet}x.prototype.isEmpty=function(){return this.objects.isEmpty()},x.prototype.insert=function(t){this.objects.add(t)},x.prototype.remove=function(t){this.objects.remove(t)},x.prototype.dump=function(t){cr.appendArray(t,this.objects.valuesRef())},cr.GridCell=x;var S=[];function T(t,e,i){var s;return v.prototype.totalCellCount++,S.length?((s=S.pop()).grid=t,s.x=e,s.y=i,s):new cr.RenderCell(t,e,i)}function C(t,e,i){this.grid=t,this.x=e,this.y=i,this.objects=[],this.is_sorted=!0,this.pending_removal=new cr.ObjectSet,this.any_pending_removal=!1}function O(t,e){return t.zindex-e.zindex}C.prototype.isEmpty=function(){return!this.objects.length||!(this.objects.length>this.pending_removal.count())&&(this.flush_pending(),!0)},C.prototype.insert=function(t){if(this.pending_removal.contains(t))return this.pending_removal.remove(t),void(this.pending_removal.isEmpty()&&(this.any_pending_removal=!1));this.objects.length?(this.objects[this.objects.length-1].get_zindex()>t.get_zindex()&&(this.is_sorted=!1),this.objects.push(t)):(this.objects.push(t),this.is_sorted=!0)},C.prototype.remove=function(t){this.pending_removal.add(t),this.any_pending_removal=!0,30<=this.pending_removal.count()&&this.flush_pending()},C.prototype.flush_pending=function(){this.any_pending_removal&&(this.pending_removal.count()!==this.objects.length?(cr.arrayRemoveAllFromObjectSet(this.objects,this.pending_removal),this.pending_removal.clear(),this.any_pending_removal=!1):this.reset())},C.prototype.ensure_sorted=function(){this.is_sorted||(this.objects.sort(O),this.is_sorted=!0)},C.prototype.reset=function(){cr.clearArray(this.objects),this.is_sorted=!0,this.pending_removal.clear(),this.any_pending_removal=!1},C.prototype.dump=function(t){this.flush_pending(),this.ensure_sorted(),this.objects.length&&t.push(this.objects)},cr.RenderCell=C;var k=["lighter","xor","copy","destination-over","source-in","destination-in","source-out","destination-out","source-atop","destination-atop"];cr.effectToCompositeOp=function(t){return t<=0||11<=t?"source-over":k[t-1]},cr.setGLBlend=function(t,e,i){if(i)switch(t.srcBlend=i.ONE,t.destBlend=i.ONE_MINUS_SRC_ALPHA,e){case 1:t.srcBlend=i.ONE,t.destBlend=i.ONE;break;case 2:break;case 3:t.srcBlend=i.ONE,t.destBlend=i.ZERO;break;case 4:t.srcBlend=i.ONE_MINUS_DST_ALPHA,t.destBlend=i.ONE;break;case 5:t.srcBlend=i.DST_ALPHA,t.destBlend=i.ZERO;break;case 6:t.srcBlend=i.ZERO,t.destBlend=i.SRC_ALPHA;break;case 7:t.srcBlend=i.ONE_MINUS_DST_ALPHA,t.destBlend=i.ZERO;break;case 8:t.srcBlend=i.ZERO,t.destBlend=i.ONE_MINUS_SRC_ALPHA;break;case 9:t.srcBlend=i.DST_ALPHA,t.destBlend=i.ONE_MINUS_SRC_ALPHA;break;case 10:t.srcBlend=i.ONE_MINUS_DST_ALPHA,t.destBlend=i.SRC_ALPHA}},cr.round6dp=function(t){return Math.round(1e6*t)/1e6},cr.equals_nocase=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t.length===e.length&&(t===e||t.toLowerCase()===e.toLowerCase()))},cr.isCanvasInputEvent=function(t){t=t.target;return!t||(t===document||t===window||(!(!document||!document.body||t!==document.body)||!!cr.equals_nocase(t.tagName,"canvas")))}}();var MatrixArray="undefined"!=typeof Float32Array?Float32Array:Array,glMatrixArrayType=MatrixArray,vec3={},mat3={},mat4={},quat4={};vec3.create=function(t){var e=new MatrixArray(3);return t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e},vec3.set=function(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},vec3.add=function(t,e,i){return i&&t!==i?(i[0]=t[0]+e[0],i[1]=t[1]+e[1],i[2]=t[2]+e[2],i):(t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t)},vec3.subtract=function(t,e,i){return i&&t!==i?(i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2],i):(t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],t)},vec3.negate=function(t,e){return(e=e||t)[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},vec3.scale=function(t,e,i){return i&&t!==i?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e,i):(t[0]*=e,t[1]*=e,t[2]*=e,t)},vec3.normalize=function(t,e){e=e||t;var i=t[0],s=t[1],n=t[2],t=Math.sqrt(i*i+s*s+n*n);return t?1===t?(e[0]=i,e[1]=s,e[2]=n):(t=1/t,e[0]=i*t,e[1]=s*t,e[2]=n*t):(e[0]=0,e[1]=0,e[2]=0),e},vec3.cross=function(t,e,i){i=i||t;var s=t[0],n=t[1],t=t[2],r=e[0],o=e[1],e=e[2];return i[0]=n*e-t*o,i[1]=t*r-s*e,i[2]=s*o-n*r,i},vec3.length=function(t){var e=t[0],i=t[1],t=t[2];return Math.sqrt(e*e+i*i+t*t)},vec3.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},vec3.direction=function(t,e,i){i=i||t;var s=t[0]-e[0],n=t[1]-e[1],t=t[2]-e[2];return(e=Math.sqrt(s*s+n*n+t*t))?(e=1/e,i[0]=s*e,i[1]
